---
title:	介质访问控制子层笔记
updated: 2017-11-19 22:00
---

1.MAC(Medium Access Control)子层：确定多路访问信道下一个使用者的协议。

2.使用点到点连接的网络-广域网;使用广播信道（多路访问信道，随机访问信道）的网络-局域网。

3.静态分配：FDM(频分多路复用):将频带平均分配给每个要参与通信的用户.

	容量为C bps信道发送平均时延T。帧到达率为y帧/秒，长度为每帧1/u位。服务率为uC帧/秒。结果为T=1/(uC-y).
	分成N个独立子信道则Tn=N*T.延迟增大。

4.动态信道分配假设:流量独立;单信道；冲突可观察；时间连续或者分槽；载波监听；

5.纯ALOHA：需要发送就发送；产生冲突帧被破坏后，随机等待一段时间后再次发送。

‘帧时’：帧的长度除以比特率，即发送一个标准帧所需要的时间。

模型：一个平均帧时产生N个帧的泊松分布。N>1,基本每个帧都冲突；0<N<1，算吞吐量。因为冲突重传帧和新帧平均为G帧。吞吐量S为负载G*成功传输概率P0.

有G帧，生成K帧的概率：<img src="http://chart.googleapis.com/chart?cht=tx&chl=\Large Pr[k]=\frac{G^ke^{-G}}{k!}" style="border:none;">

在2个帧时平均发送2G帧，不发生帧的概率(即k=0)P0=e^(-2G)。

6.分槽ALOHA:时间分成离散的槽。在G=1是S最大为1/e，为纯ALOHA最大的S的两倍。

7.载波监听多路协议

(1)1-坚持CSMA（Carrier Sense Multiple Access Protocols）:信道空闲发送概率为1；若产生冲突，等待一随机时间，然后重新开始发送过程。

(2)非坚持CSMA：若信道忙，等待一随机时间，然后重新监听信道是否空闲。

(3)p-坚持CSMA：以概率为P发送数据。

(4)带冲突检测的CSMA/CD：发现冲突后立即停止传输帧。传输期；竞争期；空闲期

(5)无冲突协议

  I.位图协议：竞争期N个槽，J号在J号槽填1表示要发送帧。信道利用率低负载：d/(N+d)；高负载：竞争期N位但是发送期要发送N帧，均摊下来即发送一帧需要1位，即信道利用率为d/(d+1).数据长度为d。低地址吃亏。

  II.令牌传递：按预定顺序传递令牌，有令牌才能发送帧。

  III.二进制倒计数：使用二进制表示站地址；从高位去or,0的淘汰，1的继续。

8.有限竞争

竞争方法:轻负载下，发送延迟小；重负载下，信道效率低

无冲突方法:轻负载下，发送延迟大；重负载下，信道效率高

将站分组，组内竞争

适应树搜索协议：一次成功传输之后，第0槽全部站可竞争信道，只有一个站要使用信道则发送；有冲突则在第1槽内半数站（2以下站）参与竞争。如其中之一获得信道，本帧后的时槽留给3以下的站；如发生冲突，继续折半搜索。


9.无线局域网协议

 AP:接入点
 
 隐藏终端问题：由于站点距离竞争者太远，从而不能发现潜在介质竞争者的问题
 
 暴露终端问题：由于非竞争者距离发送站点太近，从而导致介质非竞争者不能发送数据的问题

 冲突避免多路访问MACA（Multiple Access with Collision Avoidance）:发送方发送RTS(Request To Send)帧，接受方发送应答CTS(Clear To Send)帧

10.经典以太网协议

帧格式：
	前导码：8个字节（前7个字节为10101010，最后一个字节为10101011是SOF起始定界符）
	目标地址和源地址：2 或 6个字节，以太网为6个字节；目的地址第一位（LSB: Least Significant Bit）为 0，表示单地址（individual address）；为 1，表示组地址（group address）支持multicast，目的地址全 1，为广播地址。
	源地址第一位（LSB）为0地址中的第二位（LSB）用来区分本地地址和全球地址。
	帧长度或者类型（2字节，0-0X600之间为长度，其余为类型）
	数据（0-1500个字节）
	填充（0-46字节）
	校验和：CRC校验（4个字节）

最短帧长：避免帧的第一个比特到达电缆的远端前帧已经发完，帧发送时间应该大于 2t.最远传播时间为t
二进制指数后退算法：经典以太网使用1-坚持CSMA/CD算法；冲突发生后，按照时间槽发送，时间槽长度为2t,即51.2微秒；第 i 次冲突后，在 0 至 2i-1 间随机地选择一个等待的时槽数，再开始重传；10次冲突后，选择等待的时槽数固定在0至1023间；16次后放弃。

11.以太网性能

12.MAC子层只提供尽力而为的数据报服务，不提供确认机制和流量控制，逻辑链路控制LLC子层提供确认机制和流量控制.

13.交换式以太网
	
	集线器：简单焊接所有连接线。逻辑上等同于单根电缆。
	交换机：4到48个端口，每个端口使用RJ-45连接器连接双绞线电缆。对于去往相同输出的端口，有缓冲记录帧。

14.快速以太网：802.3u，是802.3的补充
	
 (1)100Base-4:使用4对 ISO/IEC 11801定义的3、4、5类平衡双绞线，25MHZ只比20MHZ快了25%，所以需要4对。一对总是去往集线器，另一对来自集线器；另外2对根据数据传输方向变换。

 (2)100Base-TX:使用2对5类平衡双绞线或150殴屏蔽平衡电缆，一对总是去往集线器，另一对来自集线器，全双工；类双绞线使用125 MHz的信号。4B5B编码，5个时钟周期发送4个比特，物理层与FDDI兼容，比特率为 125 * 4/5 = 100 Mbps
 (3)100Base-FX:使用2根多模光纤，全双工，2KM太长必须使用交换机。
	
   100Base-T4 和 100Base-TX 统称 100Base-T

 传输速率从10Mbps到100Mbps，为了确保CSMA/CD算法继续工作，必须保持最小帧长和最大电缆长度之间的关系。要么提升64字节，要么把最大距离降低10倍。

15.千兆以太网：802.3ab，线长不超过200米

16.万兆以太网：802.3ae，10GE只工作在全双工方式，不使用CSMA/CD协议，传输距离大大提高。

17.网桥：是工作在数据链路层的一种网络互连设备，它在互连的LAN之间实现帧的存储和转发。

	如果LAN技术是以太网，则网桥就是以太网交换机。

	哈希表：目的地和输出端口。泛洪算法和后向学习法。

	多个网桥（并行网桥）可能产生回路：构造生成树，编号最小的桥作为根，然后求到根的最短路径树（长度相等选编号最小作为父亲）。




	





	



    





